{
  "id": "snapshot_1762958473519_6eqv7b3e6",
  "approvalId": "approval_1762958473514_407v9kv89",
  "approvalTitle": "Product Overview Document",
  "version": 1,
  "timestamp": "2025-11-12T14:41:13.519Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Product Overview\n\n## Product Purpose\nBeatbox Trainer is a real-time, precision rhythm training application for Android that provides uncompromising low-latency audio performance for beatboxing practice. The app analyzes beatbox sounds (kick, snare, hi-hat) in real-time using heuristic DSP algorithms and provides immediate feedback on timing accuracy against a sample-accurate metronome. This tool solves the fundamental problem of rhythm training where existing solutions suffer from latency, jitter, and imprecise timing feedback that makes accurate practice impossible.\n\n## Target Users\n**Primary Users**: Beatboxers and vocal percussionists at all skill levels who need precise rhythm training\n\n**User Needs**:\n- Real-time audio feedback with minimal latency (< 20ms)\n- Accurate timing measurement against a stable metronome\n- Sound classification without requiring machine learning models or large app sizes\n- Progressive difficulty scaling as skills improve\n- Transparent, calibratable system that adapts to individual voice characteristics\n\n**Pain Points Addressed**:\n- High-level audio frameworks introduce unacceptable latency and jitter\n- Generic metronome apps have timing drift and instability\n- ML-based approaches require large models, high CPU usage, and lack interpretability\n- Fixed thresholds fail to adapt to different users' voice characteristics and microphones\n\n## Key Features\n\n1. **Sample-Accurate Metronome**: Oboe-generated metronome clicks with zero jitter, ensuring stable BPM grid for precise timing measurement\n2. **Real-Time Sound Classification**: Heuristic DSP-based detection distinguishes between kick, snare, and hi-hat sounds using spectral features (centroid, ZCR, flatness, rolloff)\n3. **Timing Quantization**: Measures user input against metronome grid with millisecond precision, providing \"on-time\", \"early\", or \"late\" feedback\n4. **User Calibration System**: Initial calibration phase adapts classification thresholds to individual voice characteristics and microphone response\n5. **Progressive Difficulty Levels**:\n   - Level 1: Broad categories (kick, snare, hi-hat) using simple features\n   - Level 2: Strict subcategories (closed vs open hi-hat, kick vs K-snare) using advanced features and temporal envelope analysis\n\n## Business Objectives\n- Provide the most accurate and responsive beatbox training tool on Android\n- Demonstrate the viability of heuristic DSP approaches over ML for real-time rhythm applications\n- Build a lightweight, interpretable system that runs efficiently on mid-range devices\n- Establish a foundation for rhythm training that can be extended to other vocal percussion styles\n\n## Success Metrics\n- **Latency**: End-to-end audio latency < 20ms (target: ~10-15ms with Oboe double-buffering)\n- **Timing Accuracy**: Metronome jitter = 0 samples (sample-accurate generation)\n- **Classification Accuracy**: > 90% correct classification after user calibration (Level 1), > 85% for Level 2 subcategories\n- **App Size**: < 50MB (no ML models, pure DSP)\n- **CPU Usage**: < 15% on mid-range devices during active analysis\n- **User Calibration**: < 2 minutes to complete initial setup (10 samples per sound category)\n\n## Product Principles\n\n1. **Uncompromising Real-Time Performance**: Every architectural decision prioritizes deterministic, low-latency execution. No garbage collection, no locks, no blocking operations in the audio path. Performance is never sacrificed for convenience.\n\n2. **Transparency Over Black Boxes**: Heuristic DSP models are interpretable, debuggable, and user-calibratable. Users understand what features are being measured (brightness, noisiness, attack/decay) rather than trusting opaque ML predictions.\n\n3. **Native-First Architecture**: The 4-layer stack (C++ Oboe → Rust → Java/JNI → Dart/Flutter) is intentional. High-level Dart audio plugins are explicitly avoided to maintain control over the real-time audio thread and eliminate bridging overhead.\n\n4. **Progressive Complexity**: Start simple (broad categories with 2 features) and add complexity only when users request it (subcategories with 5+ features). This keeps the initial experience fast and reliable while supporting advanced users.\n\n5. **User Adaptation, Not Universal Models**: Fixed thresholds fail. The calibration phase makes the system robust to individual differences in voice, technique, and hardware without requiring dataset collection or model retraining.\n\n## Monitoring & Visibility\n\n- **Dashboard Type**: Mobile UI (Flutter) with real-time visual feedback\n- **Real-time Updates**: Rust → Dart stream via flutter_rust_bridge for immediate classification results\n- **Key Metrics Displayed**:\n  - Current sound detected (KICK, SNARE, HI-HAT)\n  - Timing feedback (ON-TIME, EARLY, LATE) with millisecond error value\n  - Current BPM setting\n  - Calibration status per sound category\n- **Sharing Capabilities**: Future enhancement - session statistics export (JSON/CSV)\n\n## Future Vision\n\n### Potential Enhancements\n\n- **Remote Access**: WebSocket-based dashboard for desktop monitoring and practice session review\n- **Analytics**:\n  - Historical accuracy trends over practice sessions\n  - Weak spot identification (e.g., \"snare detection at 140+ BPM drops to 78%\")\n  - Timing drift visualization\n  - Progress tracking toward accuracy targets\n- **Collaboration**:\n  - Practice session recording and playback\n  - Share calibration profiles between devices\n  - Community-submitted heuristic rule improvements\n- **Extended Sound Library**:\n  - Additional beatbox sounds (rim shot, cymbal, tom variations)\n  - User-defined custom sound categories\n  - Advanced techniques (lip rolls, scratches, throat bass)\n- **Adaptive Training**:\n  - AI-driven practice routines based on detected weaknesses\n  - Gradually increasing BPM challenges\n  - Pattern complexity progression\n",
  "fileStats": {
    "size": 5840,
    "lines": 91,
    "lastModified": "2025-11-12T14:40:55.321Z"
  },
  "comments": []
}